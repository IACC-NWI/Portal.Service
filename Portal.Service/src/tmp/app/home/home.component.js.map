{"version":3,"sources":["app/home/home.component.ts"],"names":[],"mappings":"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","file":"home.component.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { UUID } from 'angular2-uuid';\r\nimport * as moment from 'moment';\r\nimport { SelectItem } from 'primeng/primeng';\r\n\r\nimport { HomeService } from './home.service';\r\nimport { MemberModel } from '../member/member.model';\r\nimport { FestivalModel } from '../offeredservices/festival.model';\r\nimport { OfferedServiceModel } from '../offeredservices/offered-service.model';\r\nimport { PurchaseOfferingModel } from './purchase-offering.model';\r\n@Component({\r\n    selector: 'iacc-home',\r\n    templateUrl: 'app/home/home.html',\r\n    styleUrls: [\r\n        'app/home/home.css'\r\n    ]\r\n})\r\nexport class HomeComponent implements OnInit {\r\n    purchaseOfferingsForm: FormGroup;\r\n    memberId: string;\r\n    memberResults: MemberModel[];\r\n    festivals: SelectItem[];\r\n    availableFestivals: FestivalModel[];\r\n    offeredServices: SelectItem[];\r\n    availableServices: OfferedServiceModel[];\r\n    suggestedDonation: number;\r\n    constructor(private homeService: HomeService, private formBuilder: FormBuilder) {\r\n        this.festivals = new Array<SelectItem>();\r\n        this.availableFestivals = new Array<FestivalModel>();\r\n        this.festivals.push({ label: '-- Festivals --', value: null });\r\n        this.offeredServices = new Array<SelectItem>();\r\n        this.availableServices = new Array<OfferedServiceModel>();\r\n        this.offeredServices.push({ label: '-- Service --', value: null });\r\n        this.suggestedDonation = 0;\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        let purchaseId = UUID.UUID();\r\n        this.homeService.getAllFestivals()\r\n            .subscribe(festivals => {\r\n                festivals.forEach(fest => {\r\n                    this.availableFestivals.push(fest);\r\n                    this.festivals.push({ label: fest.Name, value: fest.FestivalId });\r\n                });\r\n            });\r\n        this.homeService.getAllOfferedServices()\r\n            .subscribe(serv => {\r\n                serv.forEach(s => {\r\n                    this.availableServices.push(s);\r\n                    this.offeredServices.push({ label: s.Name, value: s.ServiceId });\r\n                });\r\n            });\r\n        let today = new Date();\r\n        this.purchaseOfferingsForm = this.formBuilder.group({\r\n            PurchaseId: [purchaseId],\r\n            MemberId: [''],\r\n            FirstName: ['', [<any>Validators.required, <any>Validators.maxLength(50)]],\r\n            LastName: ['', [<any>Validators.required, <any>Validators.maxLength(50)]],\r\n            Email: ['', [<any>Validators.maxLength(100)]],\r\n            AddressLine1: ['', [<any>Validators.maxLength(100)]],\r\n            AddressLine2: ['', [<any>Validators.maxLength(100)]],\r\n            City: ['', [<any>Validators.maxLength(50)]],\r\n            State: ['', [<any>Validators.maxLength(2)]],\r\n            Zip: ['', [<any>Validators.maxLength(5)]],\r\n            FestivalId: ['', [Validators.required]],\r\n            FestivalName: ['', [Validators.required]],\r\n            OfferedServiceId: ['', [Validators.required]],\r\n            OfferedServiceName: ['', [Validators.required]],\r\n            SuggestedDonation: ['', Validators.required],\r\n            ActualDonation: ['', [Validators.required]],\r\n            ServiceUnFormatedDate: [today, Validators.required]\r\n        });\r\n\r\n    }\r\n    festivalSelectValueChange(event: any) {\r\n        let festivalId = this.purchaseOfferingsForm.controls['FestivalId'];\r\n        let festival = this.availableFestivals.filter(q => q.FestivalId === festivalId.value)[0];\r\n\r\n        this.purchaseOfferingsForm.controls['FestivalName'].setValue(festival.Name);\r\n    }\r\n\r\n    offeredSvcSelectValueChanged(event: any) {\r\n        let offeredServiceId = this.purchaseOfferingsForm.controls['OfferedServiceId'];\r\n        let offeredSvc = this.availableServices.filter(q => q.ServiceId === offeredServiceId.value)[0];\r\n        this.purchaseOfferingsForm.controls['OfferedServiceName'].setValue(offeredSvc.Name);\r\n        this.suggestedDonation = offeredSvc.SuggestedDonation;\r\n        this.purchaseOfferingsForm.controls['ActualDonation'].setValue(offeredSvc.SuggestedDonation);\r\n        this.purchaseOfferingsForm.controls['SuggestedDonation'].setValue(offeredSvc.SuggestedDonation);\r\n    }\r\n\r\n    memberSelected(event: MemberModel) {\r\n        this.purchaseOfferingsForm.controls['FirstName'].setValue(event.FirstName);\r\n        this.purchaseOfferingsForm.controls['LastName'].setValue(event.LastName);\r\n        this.purchaseOfferingsForm.controls['Email'].setValue(event.Email);\r\n        this.purchaseOfferingsForm.controls['AddressLine1'].setValue(event.AddressLine1);\r\n        this.purchaseOfferingsForm.controls['AddressLine2'].setValue(event.AddressLine2);\r\n        this.purchaseOfferingsForm.controls['City'].setValue(event.City);\r\n        this.purchaseOfferingsForm.controls['State'].setValue(event.State);\r\n        this.purchaseOfferingsForm.controls['Zip'].setValue(event.Zip);\r\n        this.purchaseOfferingsForm.controls['MemberId'].setValue(event.MemberId);\r\n        console.log(event);\r\n    }\r\n    searchMembers(event) {\r\n        this.homeService.lookupmembers(event.query)\r\n            .subscribe(data => {\r\n                this.memberResults = data;\r\n            });\r\n    }\r\n\r\n    purchaseOffering(model: PurchaseOfferingModel) {\r\n        model.ServiceDate = moment(model.ServiceUnFormatedDate).format('YYYY-MM-DD');\r\n        this.homeService.purchaseOffering(model).subscribe();\r\n    }\r\n}\r\n"]}